'From Pharo11.0.0 of 20 October 2025 [Build information: Pharo-11.0.0+build.750.sha.963dc3a7de9ee8e5543f6e62d25a2a283f7dcd48 (64 Bit)] on 9 November 2025 at 5:52:50.392 pm'!!CentroTrasplantes methodsFor: 'as yet unclassified' stamp: 'franklyn 11/6/2025 22:31'!guardaBaseDeDatosProlog	| archivo fechaActual |	archivo := (nombreCentro, '.pl') asFileReference writeStream.	fechaActual := Date today.		archivo nextPutAll: '% --- Base de Datos de Pacientes ---'; cr.		listaPacientes valuesDo: [:paciente |		| meses |		meses := self mesesEnLista: (fechasIngreso at: paciente getDNI) hasta: fechaActual.		archivo			nextPutAll: 'paciente(dni(';			nextPutAll: paciente getDNI asString;			nextPutAll: '), nombre("';			nextPutAll: paciente getNombre;			nextPutAll: '", "';			nextPutAll: paciente getApellido;			nextPutAll: '"), tiempo_espera(';			nextPutAll: meses asString;			nextPutAll: ')).';			cr.	].	archivo cr; nextPutAll: '% --- Base de Datos de Donantes Registrados ---'; cr.		asociaciones keysAndValuesDo: [:dniPaciente :dniDonante |		| donante |		donante := listaDonantes at: dniDonante.		archivo			nextPutAll: 'donante(dni(';			nextPutAll: dniDonante asString;			nextPutAll: '), nombre("';			nextPutAll: donante getNombre;			nextPutAll: '", "';			nextPutAll: donante getApellido;			nextPutAll: '"), dni_paciente(';			nextPutAll: dniPaciente asString;			nextPutAll: ')).';			cr.	].	archivo cr; nextPutAll: '% --- Base de Datos de Compatibilidades (>= 50%) ---'; cr.		resultados do: [:resultado |		resultado compatible ifTrue: [			archivo				nextPutAll: 'compatibilidad(';				nextPutAll: resultado getDonante getDNI asString;				nextPutAll: ', ';				nextPutAll: resultado getPaciente getDNI asString;				nextPutAll: ', ';				nextPutAll: resultado porcentajeCompatibilidad asString;				nextPutAll: ').';				cr.		].	].	archivo close.! !